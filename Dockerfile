FROM php:7.2-alpine

LABEL author="farisv ()"
LABEL maintainer="cved (cved@protonmail.com)"

ENV LANG C.UTF-8
ENV LANGUAGE C.UTF-8
ENV LC_ALL C.UTF-8

RUN apk add --update --no-cache \
    openssh \
    libpng-dev \
    libjpeg-turbo-dev \
    libxml2-dev \
    autoconf \
    g++ \
    libtool \
    make \
    pcre-dev \
    libbsd

RUN sed -i -e 's/v3.8/v3.4/g' /etc/apk/repositories
RUN apk add --update \
    ghostscript \
    imagemagick \
    imagemagick-dev \
    && pecl install imagick \
    && docker-php-ext-enable imagick

COPY build/* /src/

CMD ["php", "-S", "0.0.0.0:80", "-t", "src/"]
